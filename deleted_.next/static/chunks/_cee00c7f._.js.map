{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/lib/uploadToCloudinary.ts"],"sourcesContent":["export async function uploadImage(file: File, folder: string) {\r\n  const cloud = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\n  const preset = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n\r\n  if (!cloud) throw new Error(\"Missing NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME\");\r\n  if (!preset) throw new Error(\"Missing NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET\");\r\n\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  fd.append(\"upload_preset\", preset);\r\n  fd.append(\"folder\", folder);\r\n\r\n  const res = await fetch(`https://api.cloudinary.com/v1_1/${cloud}/image/upload`, {\r\n    method: \"POST\",\r\n    body: fd,\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data?.error?.message || \"Upload failed\");\r\n  return data.secure_url as string;\r\n}"],"names":[],"mappings":";;;;AACgB;AADT,eAAe,YAAY,IAAU,EAAE,MAAc;QAiB7B;IAhB7B,MAAM;IACN,MAAM;IAEN;;IACA;;IAEA,MAAM,KAAK,IAAI;IACf,GAAG,MAAM,CAAC,QAAQ;IAClB,GAAG,MAAM,CAAC,iBAAiB;IAC3B,GAAG,MAAM,CAAC,UAAU;IAEpB,MAAM,MAAM,MAAM,MAAM,AAAC,mCAAwC,OAAN,OAAM,kBAAgB;QAC/E,QAAQ;QACR,MAAM;IACR;IACA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAA,iBAAA,4BAAA,cAAA,KAAM,KAAK,cAAX,kCAAA,YAAa,OAAO,KAAI;IACrD,OAAO,KAAK,UAAU;AACxB","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/app/dashboard/products/new/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { uploadImage } from \"@/lib/uploadToCloudinary\";\r\n\r\nexport default function NewProductPage() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [file, setFile] = useState<File | null>(null);\r\n\r\n  async function onSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const fd = new FormData(e.currentTarget);\r\n    const name = String(fd.get(\"name\") || \"\");\r\n    const price = String(fd.get(\"price\") || \"\");\r\n    const description = String(fd.get(\"description\") || \"\");\r\n\r\n    let imageUrl: string | null = null;\r\n    if (file) {\r\n      imageUrl = await uploadImage(file, `handcrafted-haven/products/${name.toLowerCase()}`);\r\n    }\r\n\r\n    const res = await fetch(\"/api/products\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        name,\r\n        price,\r\n        description,\r\n        imageUrl,\r\n      }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      alert(data.error || \"Failed to create product\");\r\n    } else {\r\n      alert(\"Product created!\");\r\n      window.location.href = \"/products\";\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={onSubmit} className=\"space-y-4\">\r\n      <input name=\"name\" placeholder=\"Product name\" className=\"border p-2 w-full\" />\r\n      <input name=\"price\" placeholder=\"Price\" className=\"border p-2 w-full\" />\r\n      <textarea name=\"description\" placeholder=\"Description\" className=\"border p-2 w-full\" />\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={(e) => setFile(e.target.files?.[0] ?? null)}\r\n        required\r\n      />\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={loading}\r\n        className=\"px-4 py-2 bg-black text-white rounded disabled:opacity-50\"\r\n      >\r\n        {loading ? \"Saving...\" : \"Create\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wSAAQ,EAAc;IAE9C,eAAe,SAAS,CAAmC;QACzD,EAAE,cAAc;QAChB,WAAW;QAEX,MAAM,KAAK,IAAI,SAAS,EAAE,aAAa;QACvC,MAAM,OAAO,OAAO,GAAG,GAAG,CAAC,WAAW;QACtC,MAAM,QAAQ,OAAO,GAAG,GAAG,CAAC,YAAY;QACxC,MAAM,cAAc,OAAO,GAAG,GAAG,CAAC,kBAAkB;QAEpD,IAAI,WAA0B;QAC9B,IAAI,MAAM;YACR,WAAW,MAAM,IAAA,2IAAW,EAAC,MAAM,AAAC,8BAAgD,OAAnB,KAAK,WAAW;QACnF;QAEA,MAAM,MAAM,MAAM,MAAM,iBAAiB;YACvC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA;gBACA;gBACA;YACF;QACF;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,KAAK,KAAK,IAAI;QACtB,OAAO;YACL,MAAM;YACN,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;QAEA,WAAW;IACb;IAEA,qBACE,4TAAC;QAAK,UAAU;QAAU,WAAU;;0BAClC,4TAAC;gBAAM,MAAK;gBAAO,aAAY;gBAAe,WAAU;;;;;;0BACxD,4TAAC;gBAAM,MAAK;gBAAQ,aAAY;gBAAQ,WAAU;;;;;;0BAClD,4TAAC;gBAAS,MAAK;gBAAc,aAAY;gBAAc,WAAU;;;;;;0BAEjE,4TAAC;gBACC,MAAK;gBACL,QAAO;gBACP,UAAU,CAAC;wBAAc;wBAAA;2BAAR,QAAQ,CAAA,oBAAA,kBAAA,EAAE,MAAM,CAAC,KAAK,cAAd,sCAAA,eAAgB,CAAC,EAAE,cAAnB,8BAAA,mBAAuB;;gBAChD,QAAQ;;;;;;0BAGV,4TAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAU;0BAET,UAAU,cAAc;;;;;;;;;;;;AAIjC;GA9DwB;KAAA","debugId":null}}]
}