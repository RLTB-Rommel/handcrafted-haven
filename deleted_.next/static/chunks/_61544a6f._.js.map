{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/lib/uploadToCloudinary.ts"],"sourcesContent":["export async function uploadImage(file: File, folder: string) {\r\n  const cloud = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\n  const preset = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n\r\n  if (!cloud) throw new Error(\"Missing NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME\");\r\n  if (!preset) throw new Error(\"Missing NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET\");\r\n\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  fd.append(\"upload_preset\", preset);\r\n  fd.append(\"folder\", folder);\r\n\r\n  const res = await fetch(`https://api.cloudinary.com/v1_1/${cloud}/image/upload`, {\r\n    method: \"POST\",\r\n    body: fd,\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data?.error?.message || \"Upload failed\");\r\n  return data.secure_url as string;\r\n}"],"names":[],"mappings":";;;;AACgB;AADT,eAAe,YAAY,IAAU,EAAE,MAAc;QAiB7B;IAhB7B,MAAM;IACN,MAAM;IAEN;;IACA;;IAEA,MAAM,KAAK,IAAI;IACf,GAAG,MAAM,CAAC,QAAQ;IAClB,GAAG,MAAM,CAAC,iBAAiB;IAC3B,GAAG,MAAM,CAAC,UAAU;IAEpB,MAAM,MAAM,MAAM,MAAM,AAAC,mCAAwC,OAAN,OAAM,kBAAgB;QAC/E,QAAQ;QACR,MAAM;IACR;IACA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAA,iBAAA,4BAAA,cAAA,KAAM,KAAK,cAAX,kCAAA,YAAa,OAAO,KAAI;IACrD,OAAO,KAAK,UAAU;AACxB","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/app/dashboard/products/new/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { uploadImage } from \"@/lib/uploadToCloudinary\";\r\n\r\nexport default function NewProductPage() {\r\n  const router = useRouter();\r\n  const { data: session } = useSession();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  async function onSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n    setErr(null);\r\n    setLoading(true);\r\n\r\n    const fd = new FormData(e.currentTarget);\r\n    const name = String(fd.get(\"name\") || \"\").trim();\r\n    const priceStr = String(fd.get(\"price\") || \"\").trim();\r\n    const description = String(fd.get(\"description\") || \"\").trim();\r\n\r\n    // quick client validation\r\n    if (!name) { setErr(\"Please enter a product name.\"); setLoading(false); return; }\r\n    if (!priceStr || isNaN(Number(priceStr)) || Number(priceStr) < 0) {\r\n      setErr(\"Please enter a valid price (e.g. 199 or 199.99).\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (!file) { setErr(\"Please choose an image.\"); setLoading(false); return; }\r\n\r\n    try {\r\n      // 1) Upload image first\r\n      const imageUrl = await uploadImage(file, `handcrafted-haven/products/${name.toLowerCase()}`);\r\n\r\n      // 2) Create product\r\n      const res = await fetch(\"/api/products\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name, price: priceStr, description, imageUrl }),\r\n      });\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setErr(data.error || \"Failed to create product\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // 3) Redirect: prefer artisan page if we have the slug\r\n      const slug = (session as any)?.artisanSlug;\r\n      router.push(slug ? `/artisans/${slug}` : \"/products\");\r\n    } catch (e: any) {\r\n      setErr(e?.message || \"Something went wrong while uploading/creating.\");\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"max-w-xl mx-auto p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Add a product</h1>\r\n\r\n      {err && <p className=\"mb-3 text-sm text-red-600\">{err}</p>}\r\n\r\n      <form onSubmit={onSubmit} className=\"space-y-4\">\r\n        <input\r\n          name=\"name\"\r\n          placeholder=\"Product name\"\r\n          className=\"border p-2 w-full rounded\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"price\"\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          min=\"0\"\r\n          placeholder=\"Price (PHP)\"\r\n          className=\"border p-2 w-full rounded\"\r\n          required\r\n        />\r\n        <textarea\r\n          name=\"description\"\r\n          placeholder=\"Description (optional)\"\r\n          className=\"border p-2 w-full rounded\"\r\n        />\r\n\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={(e) => setFile(e.target.files?.[0] ?? null)}\r\n          required\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"px-4 py-2 bg-black text-white rounded disabled:opacity-50\"\r\n        >\r\n          {loading ? \"Saving...\" : \"Create\"}\r\n        </button>\r\n      </form>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,SAAS,IAAA,iRAAS;IACxB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,2QAAU;IAEpC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wSAAQ,EAAc;IAC9C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,wSAAQ,EAAgB;IAE9C,eAAe,SAAS,CAAmC;QACzD,EAAE,cAAc;QAChB,OAAO;QACP,WAAW;QAEX,MAAM,KAAK,IAAI,SAAS,EAAE,aAAa;QACvC,MAAM,OAAO,OAAO,GAAG,GAAG,CAAC,WAAW,IAAI,IAAI;QAC9C,MAAM,WAAW,OAAO,GAAG,GAAG,CAAC,YAAY,IAAI,IAAI;QACnD,MAAM,cAAc,OAAO,GAAG,GAAG,CAAC,kBAAkB,IAAI,IAAI;QAE5D,0BAA0B;QAC1B,IAAI,CAAC,MAAM;YAAE,OAAO;YAAiC,WAAW;YAAQ;QAAQ;QAChF,IAAI,CAAC,YAAY,MAAM,OAAO,cAAc,OAAO,YAAY,GAAG;YAChE,OAAO;YACP,WAAW;YACX;QACF;QACA,IAAI,CAAC,MAAM;YAAE,OAAO;YAA4B,WAAW;YAAQ;QAAQ;QAE3E,IAAI;gBAmBW;YAlBb,wBAAwB;YACxB,MAAM,WAAW,MAAM,IAAA,2IAAW,EAAC,MAAM,AAAC,8BAAgD,OAAnB,KAAK,WAAW;YAEvF,oBAAoB;YACpB,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAM,OAAO;oBAAU;oBAAa;gBAAS;YACtE;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,OAAO,KAAK,KAAK,IAAI;gBACrB,WAAW;gBACX;YACF;YAEA,uDAAuD;YACvD,MAAM,QAAO,QAAC,qBAAD,4BAAA,MAAkB,WAAW;YAC1C,OAAO,IAAI,CAAC,OAAO,AAAC,aAAiB,OAAL,QAAS;QAC3C,EAAE,OAAO,GAAQ;YACf,OAAO,CAAA,cAAA,wBAAA,EAAG,OAAO,KAAI;YACrB,WAAW;QACb;IACF;IAEA,qBACE,4TAAC;QAAK,WAAU;;0BACd,4TAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,qBAAO,4TAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAElD,4TAAC;gBAAK,UAAU;gBAAU,WAAU;;kCAClC,4TAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,QAAQ;;;;;;kCAEV,4TAAC;wBACC,MAAK;wBACL,MAAK;wBACL,MAAK;wBACL,KAAI;wBACJ,aAAY;wBACZ,WAAU;wBACV,QAAQ;;;;;;kCAEV,4TAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;;;;;;kCAGZ,4TAAC;wBACC,MAAK;wBACL,QAAO;wBACP,UAAU,CAAC;gCAAc;gCAAA;mCAAR,QAAQ,CAAA,oBAAA,kBAAA,EAAE,MAAM,CAAC,KAAK,cAAd,sCAAA,eAAgB,CAAC,EAAE,cAAnB,8BAAA,mBAAuB;;wBAChD,QAAQ;;;;;;kCAGV,4TAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,UAAU,cAAc;;;;;;;;;;;;;;;;;;AAKnC;GAnGwB;;QACP,iRAAS;QACE,2QAAU;;;KAFd","debugId":null}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/node_modules/.pnpm/next%4015.5.4_react-dom%4019.1.0_react%4019.1.0__react%4019.1.0/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}