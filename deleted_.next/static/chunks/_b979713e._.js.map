{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/app/dashboard/products/new/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function NewProductPage() {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [price, setPrice] = useState<string>(\"\"); // keep as string; API will coerce for Decimal\r\n  const [description, setDescription] = useState(\"\");\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [busy, setBusy] = useState(false);\r\n  const router = useRouter();\r\n\r\n  async function uploadToCloudinary() {\r\n    if (!file) return \"/placeholder.jpg\";\r\n    const fd = new FormData();\r\n    fd.append(\"file\", file);\r\n    fd.append(\"upload_preset\", process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET!);\r\n\r\n    const res = await fetch(\r\n      `https://api.cloudinary.com/v1_1/${process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME}/image/upload`,\r\n      { method: \"POST\", body: fd }\r\n    );\r\n    const json = await res.json();\r\n    if (!res.ok || !json.secure_url) {\r\n      throw new Error(json.error?.message || \"Image upload failed\");\r\n    }\r\n    return json.secure_url as string;\r\n  }\r\n\r\n  async function submit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (!title || price === \"\") {\r\n      alert(\"Please provide a title and price.\");\r\n      return;\r\n    }\r\n    setBusy(true);\r\n    try {\r\n      const imageUrl = await uploadToCloudinary();\r\n\r\n      const res = await fetch(\"/api/products\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          title,\r\n          description,\r\n          price, // keep as string; API handles Decimal\r\n          imageUrl,\r\n        }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const j = await res.json().catch(() => ({}));\r\n        throw new Error(j.error || \"Failed to create product\");\r\n      }\r\n      router.push(\"/products\");\r\n    } catch (err: any) {\r\n      alert(err.message || \"Something went wrong\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"mx-auto max-w-2xl p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Add a product</h1>\r\n\r\n      <form onSubmit={submit} className=\"space-y-4\">\r\n        <input\r\n          className=\"w-full border p-2 rounded\"\r\n          placeholder=\"Title\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          min=\"0\"\r\n          className=\"w-full border p-2 rounded\"\r\n          placeholder=\"Price\"\r\n          value={price}\r\n          onChange={(e) => setPrice(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <textarea\r\n          className=\"w-full border p-2 rounded\"\r\n          placeholder=\"Description (optional)\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          rows={4}\r\n        />\r\n\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={(e) => setFile(e.target.files?.[0] || null)}\r\n        />\r\n\r\n        <button\r\n          className=\"px-4 py-2 rounded bg-black text-white disabled:opacity-60\"\r\n          disabled={busy}\r\n        >\r\n          {busy ? \"Saving...\" : \"Create\"}\r\n        </button>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAiB+B;;AAf/B;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wSAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wSAAQ,EAAS,KAAK,8CAA8C;IAC9F,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wSAAQ,EAAC;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wSAAQ,EAAc;IAC9C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wSAAQ,EAAC;IACjC,MAAM,SAAS,IAAA,iRAAS;IAExB,eAAe;QACb,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,KAAK,IAAI;QACf,GAAG,MAAM,CAAC,QAAQ;QAClB,GAAG,MAAM,CAAC;QAEV,MAAM,MAAM,MAAM,MAChB,AAAC,mCAAgF,sDAAA,kBACjF;YAAE,QAAQ;YAAQ,MAAM;QAAG;QAE7B,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,UAAU,EAAE;gBACf;YAAhB,MAAM,IAAI,MAAM,EAAA,cAAA,KAAK,KAAK,cAAV,kCAAA,YAAY,OAAO,KAAI;QACzC;QACA,OAAO,KAAK,UAAU;IACxB;IAEA,eAAe,OAAO,CAAkB;QACtC,EAAE,cAAc;QAChB,IAAI,CAAC,SAAS,UAAU,IAAI;YAC1B,MAAM;YACN;QACF;QACA,QAAQ;QACR,IAAI;YACF,MAAM,WAAW,MAAM;YAEvB,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA;oBACA;oBACA;gBACF;YACF;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;gBAC1C,MAAM,IAAI,MAAM,EAAE,KAAK,IAAI;YAC7B;YACA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,MAAM,IAAI,OAAO,IAAI;QACvB,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,4TAAC;QAAK,WAAU;;0BACd,4TAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,4TAAC;gBAAK,UAAU;gBAAQ,WAAU;;kCAChC,4TAAC;wBACC,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,QAAQ;;;;;;kCAGV,4TAAC;wBACC,MAAK;wBACL,MAAK;wBACL,KAAI;wBACJ,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,QAAQ;;;;;;kCAGV,4TAAC;wBACC,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,MAAM;;;;;;kCAGR,4TAAC;wBACC,MAAK;wBACL,QAAO;wBACP,UAAU,CAAC;gCAAc;mCAAR,QAAQ,EAAA,kBAAA,EAAE,MAAM,CAAC,KAAK,cAAd,sCAAA,eAAgB,CAAC,EAAE,KAAI;;;;;;;kCAGlD,4TAAC;wBACC,WAAU;wBACV,UAAU;kCAET,OAAO,cAAc;;;;;;;;;;;;;;;;;;AAKhC;GAzGwB;;QAMP,iRAAS;;;KANF","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/node_modules/.pnpm/next%4015.5.4_react-dom%4019.1.0_react%4019.1.0__react%4019.1.0/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}