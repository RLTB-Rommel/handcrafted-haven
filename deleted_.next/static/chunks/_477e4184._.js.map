{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/lib/uploadToCloudinary.ts"],"sourcesContent":["export async function uploadImage(file: File, folder: string) {\r\n  const cloud = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\n  const preset = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n\r\n  if (!cloud) throw new Error(\"Missing NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME\");\r\n  if (!preset) throw new Error(\"Missing NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET\");\r\n\r\n  const fd = new FormData();\r\n  fd.append(\"file\", file);\r\n  fd.append(\"upload_preset\", preset);\r\n  fd.append(\"folder\", folder);\r\n\r\n  const res = await fetch(`https://api.cloudinary.com/v1_1/${cloud}/image/upload`, {\r\n    method: \"POST\",\r\n    body: fd,\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data?.error?.message || \"Upload failed\");\r\n  return data.secure_url as string;\r\n}"],"names":[],"mappings":";;;;AACgB;AADT,eAAe,YAAY,IAAU,EAAE,MAAc;QAiB7B;IAhB7B,MAAM;IACN,MAAM;IAEN;;IACA;;IAEA,MAAM,KAAK,IAAI;IACf,GAAG,MAAM,CAAC,QAAQ;IAClB,GAAG,MAAM,CAAC,iBAAiB;IAC3B,GAAG,MAAM,CAAC,UAAU;IAEpB,MAAM,MAAM,MAAM,MAAM,AAAC,mCAAwC,OAAN,OAAM,kBAAgB;QAC/E,QAAQ;QACR,MAAM;IACR;IACA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAA,iBAAA,4BAAA,cAAA,KAAM,KAAK,cAAX,kCAAA,YAAa,OAAO,KAAI;IACrD,OAAO,KAAK,UAAU;AACxB","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/lib/slug.ts"],"sourcesContent":["export const toSlug = (s: string) =>\r\n  s.toLowerCase().trim().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)/g, \"\");"],"names":[],"mappings":";;;;AAAO,MAAM,SAAS,CAAC,IACrB,EAAE,WAAW,GAAG,IAAI,GAAG,OAAO,CAAC,eAAe,KAAK,OAAO,CAAC,YAAY","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/conni/Documents/Pathway/handcrafted-haven/app/auth/register/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { uploadImage } from \"@/lib/uploadToCloudinary\";\r\nimport { toSlug } from \"@/lib/slug\";\r\n\r\ntype FieldErrors = Record<string, string[]>;\r\n\r\nexport default function RegisterArtisanPage() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState<FieldErrors>({});\r\n  const [okMsg, setOkMsg] = useState(\"\");\r\n\r\n  const [avatarFile, setAvatarFile] = useState<File | null>(null);\r\n  const [coverFile, setCoverFile] = useState<File | null>(null);\r\n  const [previewAvatar, setPreviewAvatar] = useState<string | null>(null);\r\n  const [previewCover, setPreviewCover] = useState<string | null>(null);\r\n\r\n  function handleAvatarChange(file: File | null) {\r\n    setAvatarFile(file);\r\n    setPreviewAvatar(file ? URL.createObjectURL(file) : null);\r\n  }\r\n  function handleCoverChange(file: File | null) {\r\n    setCoverFile(file);\r\n    setPreviewCover(file ? URL.createObjectURL(file) : null);\r\n  }\r\n\r\n  function Err({ field }: { field: string }) {\r\n    if (!errors?.[field]?.length) return null;\r\n    return <p className=\"text-red-600 text-sm mt-1\">{errors[field][0]}</p>;\r\n  }\r\n\r\n  async function onSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setErrors({});\r\n    setOkMsg(\"\");\r\n\r\n    const fd = new FormData(e.currentTarget);\r\n    const email = String(fd.get(\"email\") || \"\");\r\n    const password = String(fd.get(\"password\") || \"\");\r\n    const displayName = String(fd.get(\"displayName\") || \"\");\r\n    const studioName = String(fd.get(\"studioName\") || \"\");\r\n    const name = String(fd.get(\"name\") || \"\");\r\n    const bio = String(fd.get(\"bio\") || \"\");\r\n    const city = String(fd.get(\"city\") || \"\");\r\n    const country = String(fd.get(\"country\") || \"\");\r\n\r\n    const baseForSlug = displayName || studioName || crypto.randomUUID();\r\n    const slug = toSlug(baseForSlug);\r\n\r\n    // Upload images first -> get URLs for API\r\n    let avatarUrl: string | null = null;\r\n    let coverUrl: string | null = null;\r\n\r\n    try {\r\n      if (avatarFile) {\r\n        avatarUrl = await uploadImage(avatarFile, `handcrafted-haven/artisans/${slug}`);\r\n      }\r\n      if (coverFile) {\r\n        coverUrl = await uploadImage(coverFile, `handcrafted-haven/artisans/${slug}`);\r\n      }\r\n\r\n      const payload = {\r\n        email,\r\n        password,\r\n        displayName,\r\n        name,\r\n        studioName,\r\n        bio,\r\n        city,\r\n        country,\r\n        avatarUrl: avatarUrl || \"\",\r\n        coverUrl: coverUrl || \"\",\r\n      };\r\n\r\n      const res = await fetch(\"/api/auth/register\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setErrors(data?.errors ?? { form: [data?.error || \"Registration failed\"] });\r\n      } else {\r\n        setOkMsg(\"Account created! Redirecting…\");\r\n        window.location.href = `/artisans/${data.slug}`;\r\n      }\r\n    } catch (err) {\r\n      const msg = (err as { message?: string })?.message ?? \"Something went wrong\";\r\n      setErrors({ form: [msg] });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6\">\r\n      <h1 className=\"text-2xl font-semibold mb-6\">Create account</h1>\r\n\r\n      <form onSubmit={onSubmit} className=\"space-y-6\">\r\n        {/* REQUIRED */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium\">Email</label>\r\n            <input name=\"email\" type=\"email\" required className=\"w-full border rounded p-2\" />\r\n            <Err field=\"email\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium\">Password</label>\r\n            <input name=\"password\" type=\"password\" required minLength={8} className=\"w-full border rounded p-2\" />\r\n            <Err field=\"password\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium\">Display Name</label>\r\n          <input name=\"displayName\" required className=\"w-full border rounded p-2\" />\r\n          <Err field=\"displayName\" />\r\n        </div>\r\n\r\n        {/* OPTIONAL */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium\">Studio Name</label>\r\n            <input name=\"studioName\" className=\"w-full border rounded p-2\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium\">Your Name (optional)</label>\r\n            <input name=\"name\" className=\"w-full border rounded p-2\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium\">Short Bio</label>\r\n          <textarea name=\"bio\" rows={4} className=\"w-full border rounded p-2\" />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium\">City</label>\r\n            <input name=\"city\" className=\"w-full border rounded p-2\" />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium\">Country</label>\r\n            <input name=\"country\" className=\"w-full border rounded p-2\" />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Avatar */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium\">Avatar</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={(e) => handleAvatarChange(e.target.files?.[0] ?? null)}\r\n          />\r\n          {previewAvatar && (\r\n            <div className=\"mt-2\">\r\n              <Image\r\n                src={previewAvatar}\r\n                alt=\"Avatar preview\"\r\n                width={96}\r\n                height={96}\r\n                className=\"h-24 w-24 object-cover rounded-full border\"\r\n                unoptimized\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Cover */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium\">Cover Image</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={(e) => handleCoverChange(e.target.files?.[0] ?? null)}\r\n          />\r\n          {previewCover && (\r\n            <div className=\"mt-2\">\r\n              <Image\r\n                src={previewCover}\r\n                alt=\"Cover preview\"\r\n                width={1024}\r\n                height={256}\r\n                className=\"h-24 w-full object-cover border rounded\"\r\n                unoptimized\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {errors?.form?.length ? <p className=\"text-red-600\">{errors.form[0]}</p> : null}\r\n        {okMsg ? <p className=\"text-green-600\">{okMsg}</p> : null}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"px-4 py-2 rounded bg-black text-white disabled:opacity-50\"\r\n        >\r\n          {loading ? \"Creating…\" : \"Create account\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}